name: bindplane-transform-agent
type: Microsoft.App/containerApps
location: eastus
properties:
  managedEnvironmentId: redacted
  configuration:
    activeRevisionsMode: Single
    ingress:
      external: false
      targetPort: 4568
      allowInsecure: true
  template:
    containers:
      - name: transform-agent
        image: ghcr.io/observiq/bindplane-transform-agent:1.94.3-bindplane
        resources:
          cpu: 1.0
          memory: 2Gi
        env:
          - name: PORT
            value: "4568"
        probes:
          - type: liveness
            httpGet:
              path: /collector-version
              port: 4568
            initialDelaySeconds: 0
            periodSeconds: 30
            timeoutSeconds: 5
            failureThreshold: 3
          - type: readiness
            httpGet:
              path: /collector-version
              port: 4568
            initialDelaySeconds: 0
            periodSeconds: 10
            timeoutSeconds: 5
            failureThreshold: 3
    scale:
      minReplicas: 2
      maxReplicas: 2
